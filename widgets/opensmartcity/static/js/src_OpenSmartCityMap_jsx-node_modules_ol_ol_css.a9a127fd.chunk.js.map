{"version":3,"file":"static/js/src_OpenSmartCityMap_jsx-node_modules_ol_ol_css.a9a127fd.chunk.js","mappings":"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","sources":["OpenSmartCityMap.jsx","components/Map.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/jsx-runtime.js"],"sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles, withTheme } from '@mui/styles';\r\n\r\nimport { VisRxWidget } from '@iobroker/vis-2-widgets-react-dev';\r\n\r\nimport Map from './components/Map';\r\n\r\nconst styles = () => ({\r\n    content: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        height: '100%',\r\n    },\r\n});\r\n\r\nconst Generic = window.visRxWidget || VisRxWidget;\r\n\r\nclass OpenSmartCityMap extends Generic {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state._key = 0;\r\n        this.hideHome = null;\r\n    }\r\n\r\n    static getWidgetInfo() {\r\n        return {\r\n            id: 'tplOpenSmartCityMap',\r\n\r\n            visSet: 'opensmartcity',\r\n            visSetLabel: 'set_label', // Label of widget set\r\n            visSetColor: '#dcca19', // color of a widget set\r\n\r\n            visWidgetLabel: 'OpenSmartCityMap',  // Label of widget\r\n            visName: 'OpenSmartCityMap',\r\n            visAttrs: [{\r\n                name: 'common',\r\n                fields: [\r\n                    {\r\n                        name: 'noCard',\r\n                        label: 'without_card',\r\n                        type: 'checkbox',\r\n                        default: false,\r\n                    },\r\n                    {\r\n                        name: 'widgetTitle',\r\n                        label: 'name',\r\n                        hidden: '!!data.noCard',\r\n                    },\r\n                    {\r\n                        label: 'instance',\r\n                        name: 'instance',\r\n                        type: 'instance',\r\n                        adapter: 'opensmartcity',\r\n                    },\r\n                    {\r\n                        name: 'hideHome',\r\n                        label: 'hide_home',\r\n                        type: 'checkbox',\r\n                    },\r\n                    {\r\n                        label: 'zoom_level',\r\n                        name: 'zoomLevel',\r\n                        type: 'slider',\r\n                        min: -1,\r\n                        max: 17,\r\n                        default: 0,\r\n                    },\r\n                ],\r\n            }],\r\n            visDefaultStyle: {\r\n                width: '100%',\r\n                height: 300,\r\n                position: 'relative',\r\n            },\r\n            visPrev: 'widgets/opensmartcity/img/prev_opensmartcity.png',\r\n        };\r\n    }\r\n\r\n    // eslint-disable-next-line class-methods-use-this\r\n    getWidgetInfo() {\r\n        return OpenSmartCityMap.getWidgetInfo();\r\n    }\r\n\r\n    static buildPoints(things, dataStreams, values) {\r\n        return Object.keys(things).map(id => {\r\n            const obj = things[id];\r\n            if (!obj.native || !obj.native.coordinates || !obj.native.coordinates.length) {\r\n                return null;\r\n            }\r\n            return {\r\n                longitude: obj.native.coordinates[0],\r\n                latitude: obj.native.coordinates[1],\r\n                name: obj.common.name && typeof obj.common.name === 'object' ? (obj.common.name[this.props.context.lang] || obj.common.name.en) : (obj.common.name || ''),\r\n                description: obj.common.desc && typeof obj.common.desc === 'object' ? (obj.common.desc[this.props.context.lang] || obj.common.desc.en) : (obj.common.desc || ''),\r\n                dataStreams: Object.keys(dataStreams).filter(dsId => dsId.startsWith(`${id}.`)).map(dsId => ({\r\n                    id: dsId.split('.').pop(),\r\n                    name: dataStreams[dsId].common.name,\r\n                    description: dataStreams[dsId].common.desc,\r\n                    value: values[dsId] && values[dsId].val !== undefined ? values[dsId].val : null,\r\n                    unit: dataStreams[dsId].common.unit || '',\r\n                })),\r\n            };\r\n        }).filter(p => p);\r\n    }\r\n\r\n    onDataUpdated = (id, state) => {\r\n        const values = { ...this.state.values };\r\n        values[id] = state;\r\n        this.setState({\r\n            values,\r\n            points: OpenSmartCityMap.buildPoints(this.state.things, this.state.dataStreams, values),\r\n        });\r\n    };\r\n\r\n    async propertiesUpdate() {\r\n        const subscribed = `${this.state.rxData.instance}.*`;\r\n        // unsubscribe from old\r\n        if (this.subscribed && this.subscribed !== subscribed) {\r\n            this.props.context.socket.unsubscribeObject(this.subscribed, this.onPointsChanged);\r\n            await this.props.context.socket.unsubscribeStates(this.subscribed, this.onDataUpdated);\r\n            this.subscribed = null;\r\n        }\r\n        if (this.state.rxData.instance !== null && this.state.rxData.instance !== undefined && this.subscribed !== subscribed) {\r\n            this.subscribed = subscribed;\r\n            const things = await this.props.context.socket.getObjectViewSystem('channel', this.subscribed.replace(/\\*$/, ''), `${subscribed.replace(/\\*$/, '')}\\u9999`);\r\n            const dataStreams = await this.props.context.socket.getObjectViewSystem('state', this.subscribed.replace(/\\*$/, ''), `${subscribed.replace(/\\*$/, '')}\\u9999`);\r\n            const values = await this.props.context.socket.getForeignStates(this.subscribed);\r\n\r\n            this.setState({\r\n                things,\r\n                values,\r\n                dataStreams,\r\n                points: OpenSmartCityMap.buildPoints(things, dataStreams, values),\r\n            }, async () => {\r\n                await this.props.context.socket.subscribeObject(this.subscribed, this.onPointsChanged);\r\n                await this.props.context.socket.subscribeState(this.subscribed, this.onDataUpdated);\r\n            });\r\n        }\r\n    }\r\n\r\n    static getI18nPrefix() {\r\n        return 'opensmartcity_';\r\n    }\r\n\r\n    async componentDidMount() {\r\n        super.componentDidMount();\r\n        await this.propertiesUpdate();\r\n    }\r\n\r\n    onPointsChanged = (id, obj) => {\r\n        if (!obj) {\r\n            if (this.state.things[id]) {\r\n                const things = { ...this.state.things };\r\n                delete things[id];\r\n                this.setState({\r\n                    things,\r\n                    points: OpenSmartCityMap.buildPoints(things, this.state.dataStreams, this.state.values),\r\n                });\r\n            } else if (this.state.dataStreams[id]) {\r\n                const dataStreams = { ...this.state.dataStreams };\r\n                delete dataStreams[id];\r\n                this.setState({\r\n                    dataStreams,\r\n                    points: OpenSmartCityMap.buildPoints(this.state.things, dataStreams, this.state.values),\r\n                });\r\n            }\r\n        } else if (obj.type === 'channel') {\r\n            const things = { ...this.state.things };\r\n            things[id] = obj;\r\n            this.setState({\r\n                things,\r\n                points: OpenSmartCityMap.buildPoints(things, this.state.dataStreams, this.state.values),\r\n            });\r\n        } else if (obj.type === 'state') {\r\n            const dataStreams = { ...this.state.dataStreams };\r\n            dataStreams[id] = obj;\r\n            this.setState({\r\n                dataStreams,\r\n                points: OpenSmartCityMap.buildPoints(this.state.things, dataStreams, this.state.values),\r\n            });\r\n        }\r\n    };\r\n\r\n    async componentWillUnmount() {\r\n        if (this.subscribed) {\r\n            await this.props.context.socket.unsubscribeObject(this.subscribed, this.onPointsChanged);\r\n            await this.props.context.socket.unsubscribeState(this.subscribed, this.onDataUpdated);\r\n            this.subscribed = null;\r\n        }\r\n    }\r\n\r\n    onRxDataChanged() {\r\n        this.propertiesUpdate();\r\n    }\r\n\r\n    renderWidgetBody(props) {\r\n        super.renderWidgetBody(props);\r\n\r\n        if (this.hideHome === null) {\r\n            this.hideHome = this.state.rxData.hideHome;\r\n        } else if (this.hideHome !== this.state.rxData.hideHome) {\r\n            this.hideHome = this.state.rxData.hideHome;\r\n            setTimeout(() => this.setState({ _key: this.state._key + 1 }), 100);\r\n        }\r\n\r\n        const content = <Map\r\n            key={this.state._key}\r\n            socket={this.props.context.socket}\r\n            id={`map_${this.props.id}`}\r\n            things={this.state.points || []}\r\n            hideHome={this.state.rxData.hideHome}\r\n        />;\r\n\r\n        if (!this.state.rxData.noCard) {\r\n            return this.wrapContent(content);\r\n        }\r\n\r\n        return content;\r\n    }\r\n}\r\n\r\nOpenSmartCityMap.propTypes = {\r\n    context: PropTypes.object,\r\n    themeType: PropTypes.string,\r\n    style: PropTypes.object,\r\n    data: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(withTheme(OpenSmartCityMap));\r\n","import PropTypes from 'prop-types';\r\n\r\nimport 'ol/ol.css';\r\nimport { Map, View, Feature } from 'ol';\r\nimport { createOrUpdate, extend } from 'ol/extent';\r\nimport { Tile, Vector as LayerVector } from 'ol/layer';\r\nimport {\r\n    Icon, Style, Fill,\r\n    Text,\r\n} from 'ol/style';\r\nimport { OSM, Vector as VectorSource } from 'ol/source';\r\nimport { Point } from 'ol/geom';\r\nimport { /* toLonLat, */ fromLonLat } from 'ol/proj';\r\n\r\nimport { Component, createRef } from 'react';\r\n\r\nimport { I18n } from '@iobroker/adapter-react-v5';\r\n\r\nconst HomeSVG = `data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 -960 960 960\" width=\"24\">\r\n    <path fill=\"#00F\" d=\"M360-440h80v-110h80v110h80v-190l-120-80-120 80v190Zm120 254q122-112 181-203.5T720-552q0-109-69.5-178.5T480-800q-101 0-170.5 69.5T240-552q0 71 59 162.5T480-186Zm0 106Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 100-79.5 217.5T480-80Zm0-480Z\"/>\r\n</svg>`)}`;\r\n\r\nconst TempSVG = `data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"48\" viewBox=\"0 -960 960 960\" width=\"48\">\r\n    <path fill=\"#080\" d=\"M480-120q-75.53 0-128.765-53.235Q298-226.47 298-302q0-49.099 24-91.55Q346-436 388-462v-286q0-38.333 26.765-65.167 26.764-26.833 65-26.833Q518-840 545-813.167q27 26.834 27 65.167v286q42 26 66 68.45 24 42.451 24 91.55 0 75.53-53.235 128.765Q555.53-120 480-120Zm.118-59Q531-179 566.5-214.875 602-250.75 602-302q0-37.81-18-70.405T532-420l-20-9v-319q0-13.6-9.2-22.8-9.2-9.2-22.8-9.2-13.6 0-22.8 9.2-9.2 9.2-9.2 22.8v319l-20 9q-34 15-52 47.595T358-302q0 51.25 35.618 87.125Q429.235-179 480.118-179ZM480-302Z\"/>\r\n</svg>`)}`;\r\n\r\nclass OlMap extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            longitude: 0,\r\n            latitude:  0,\r\n            things:    [...this.props.things],\r\n            mapHeight: 0,\r\n            mapWidth:  0,\r\n        };\r\n\r\n        this.refMap = createRef();\r\n    }\r\n\r\n    // positionReady(position) {\r\n    //     this.setState({\r\n    //         latitude:  position.coords.latitude.toFixed(8),\r\n    //         longitude: position.coords.longitude.toFixed(8),\r\n    //     }, () => this.updateMap());\r\n    // }\r\n\r\n    // getPositionForAddress() {\r\n    //     window.fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(`${this.state.country} ${this.state.city} ${this.state.address}`)}`)\r\n    //         .then(data => data.json())\r\n    //         .then(data => {\r\n    //             let changed = false;\r\n    //\r\n    //             if (!data || !data[0]) {\r\n    //                 window.alert(I18n.t('Nothing found'));\r\n    //                 return;\r\n    //             }\r\n    //\r\n    //             let latitude = parseFloat(this.state.latitude);\r\n    //             if (latitude !== parseFloat(data[0].lat)) {\r\n    //                 latitude = parseFloat(data[0].lat);\r\n    //                 changed = true;\r\n    //             }\r\n    //             let longitude = parseFloat(this.state.longitude);\r\n    //             if (longitude !== parseFloat(data[0].lon)) {\r\n    //                 longitude = parseFloat(data[0].lon);\r\n    //                 changed = true;\r\n    //             }\r\n    //             changed && this.setState({ longitude, latitude }, () =>\r\n    //                 this.updateMap());\r\n    //         })\r\n    //         .catch(e =>\r\n    //             window.alert(I18n.t('Cannot fetch address %s', e)));\r\n    // }\r\n\r\n    calculateZoomLevel(map) {\r\n        const center = fromLonLat([parseFloat(this.state.longitude || 0), parseFloat(this.state.latitude || 0)]);\r\n\r\n        if (!this.state.things?.length) {\r\n            return 17;\r\n        }\r\n        let extent;\r\n\r\n        if (!this.props.hideHome) {\r\n            // Create an empty extent\r\n            extent = createOrUpdate(center[0], center[1], center[0], center[1]);\r\n        } else {\r\n            // take first point as a center\r\n            const pPoint = fromLonLat([this.state.things[0].longitude, this.state.things[0].latitude]);\r\n            extent = createOrUpdate(pPoint[0], pPoint[1], pPoint[0], pPoint[1]);\r\n        }\r\n\r\n        // Extend the extent to include each point\r\n        this.state.things.forEach((point, i) => {\r\n            if (!i && this.props.hideHome) {\r\n                return;\r\n            }\r\n            const pPoint = fromLonLat([point.longitude, point.latitude]);\r\n            extend(extent, [pPoint[0], pPoint[1], pPoint[0], pPoint[1]]);\r\n        });\r\n\r\n        // Fit the map view to the extent of the things\r\n        map.getView().fit(extent, map.getSize());\r\n\r\n        // Return the zoom level of the map after fitting\r\n        return map.getView().getZoom() - 1;\r\n    }\r\n\r\n    calculateCenter() {\r\n        let count = this.props.hideHome ? 0 : 1;\r\n        let longs = this.props.hideHome ? 0 : parseFloat(this.state.longitude || 0);\r\n        let lats = this.props.hideHome ? 0 : parseFloat(this.state.latitude || 0);\r\n        this.state.things.forEach(point => {\r\n            longs += point.longitude;\r\n            lats += point.latitude;\r\n            count++;\r\n        });\r\n\r\n        return fromLonLat([longs / count, lats / count]);\r\n    }\r\n\r\n    displayTooltip(pixel, target) {\r\n        // ignore event if mouse is on control\r\n        const feature = target.closest('.ol-control') ? undefined :\r\n            this.OSM.oMap.forEachFeatureAtPixel(pixel, f => f);\r\n        if (feature) {\r\n            this.hideTimer && clearTimeout(this.hideTimer);\r\n            const tooltip = {\r\n                left: pixel[0],\r\n                top: pixel[1],\r\n                text: feature.get('name'),\r\n            };\r\n            this.setState({ tooltip });\r\n        } else {\r\n            this.hideTimer && clearTimeout(this.hideTimer);\r\n            this.hideTimer = setTimeout(() => this.setState({ tooltip: null }), 500);\r\n        }\r\n    }\r\n\r\n    updateMap() {\r\n        // OPEN STREET MAPS\r\n        // if (window.navigator.geolocation && (!this.state.longitude || !this.state.latitude)) {\r\n        //     window.navigator.geolocation.getCurrentPosition(position => this.positionReady(position));\r\n        // }\r\n\r\n        const center = fromLonLat([parseFloat(this.state.longitude || 0), parseFloat(this.state.latitude || 0)]);\r\n\r\n        if (!this.OSM) {\r\n            // get the coordinates from the browser\r\n            this.OSM = {};\r\n            if (!this.props.hideHome) {\r\n                this.OSM.markerSource = new VectorSource();\r\n            }\r\n            this.OSM.pointsSource = new VectorSource();\r\n\r\n            this.OSM.markerStyle = new Style({\r\n                image: new Icon(/** @type {olx.style.IconOptions} */ ({\r\n                    anchor: [0.5, 49],\r\n                    anchorXUnits: 'fraction',\r\n                    anchorYUnits: 'pixels',\r\n                    opacity: 0.75,\r\n                    src: HomeSVG,\r\n                })),\r\n            });\r\n\r\n            this.OSM.tempStyle = new Style({\r\n                image: new Icon(/** @type {olx.style.IconOptions} */ ({\r\n                    anchor: [0.5, 49],\r\n                    anchorXUnits: 'fraction',\r\n                    anchorYUnits: 'pixels',\r\n                    opacity: 0.75,\r\n                    src: TempSVG,\r\n                })),\r\n            });\r\n\r\n            this.OSM.pointsLayer = new LayerVector({\r\n                source: this.OSM.pointsSource,\r\n                style: this.OSM.tempStyle,\r\n            });\r\n\r\n            const layers = [\r\n                new Tile({ source: new OSM() }),\r\n                this.OSM.pointsLayer,\r\n            ];\r\n            if (!this.props.hideHome) {\r\n                layers.push(new LayerVector({\r\n                    source: this.OSM.markerSource,\r\n                    style: this.OSM.markerStyle,\r\n                }));\r\n            }\r\n\r\n            this.OSM.oMap = new Map({\r\n                target: this.props.id || 'map',\r\n                layers,\r\n                view: new View({ center, zoom: 17 }),\r\n            });\r\n\r\n            if (!this.props.hideHome) {\r\n                this.OSM.marker = new Feature({\r\n                    geometry: new Point(center),\r\n                    name: I18n.t('Your home'),\r\n                });\r\n                this.OSM.markerSource.addFeature(this.OSM.marker);\r\n            }\r\n\r\n            this.OSM.oMap.on('pointermove', evt => {\r\n                if (evt.dragging) {\r\n                    this.state.tooltip && this.setState({ tooltip: null });\r\n                    return;\r\n                }\r\n                const pixel = this.OSM.oMap.getEventPixel(evt.originalEvent);\r\n                this.displayTooltip(pixel, evt.originalEvent.target);\r\n            });\r\n\r\n            this.OSM.oMap.on('singleclick', event => {\r\n                const pixel = this.OSM.oMap.getEventPixel(event.originalEvent);\r\n                const feature = this.OSM.oMap.forEachFeatureAtPixel(pixel, f => f);\r\n                if (this.props.onSelect && feature) {\r\n                    this.props.onSelect(feature.get('name'));\r\n                }\r\n\r\n                // this.setState({ longitude: lonLat[0], latitude: lonLat[1] }, () => this.updateMap());\r\n            });\r\n        }\r\n        // remove all things from layer\r\n        this.OSM.pointsSource.clear();\r\n        // add all points to the layer\r\n        for (let p = 0; p < this.state.things.length; p++) {\r\n            const thing = this.state.things[p];\r\n            const feature = new Feature({\r\n                geometry: new Point(fromLonLat([thing.longitude, thing.latitude])),\r\n                name: thing.name,\r\n            });\r\n            const text = [];\r\n            thing.dataStreams.forEach(ds => {\r\n                console.log(ds);\r\n                if (ds.value !== undefined && ds.value !== null) {\r\n                    text.push((Math.round(ds.value * 10) / 10).toString() + (ds.unit || ''));\r\n                }\r\n            });\r\n\r\n            const iconTemp = new Style({\r\n                image: new Icon(/** @type {olx.style.IconOptions} */ ({\r\n                    anchor: [0.5, 49],\r\n                    anchorXUnits: 'fraction',\r\n                    anchorYUnits: 'pixels',\r\n                    opacity: 0.75,\r\n                    src: TempSVG,\r\n                })),\r\n                text: new Text({\r\n                    text: text.join('\\n'),\r\n                    scale: 1.2,\r\n                    fill: new Fill({ color: '#004f00' }),\r\n                    // stroke: new Stroke({ color: '0', width: 3 }),\r\n                }),\r\n            });\r\n            feature.setStyle(iconTemp);\r\n\r\n            this.OSM.pointsSource.addFeature(feature);\r\n        }\r\n\r\n        if (!this.props.hideHome) {\r\n            this.OSM.marker.setGeometry(new Point(center));\r\n        }\r\n        this.OSM.oMap.setView(new View({ center: this.calculateCenter(), zoom: this.calculateZoomLevel(this.OSM.oMap) }));\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.socket.getSystemConfig()\r\n            .then(obj =>\r\n                this.setState({\r\n                    longitude: obj.common.longitude,\r\n                    latitude:  obj.common.latitude,\r\n                }, () => this.refMap.current?.clientHeight && this.updateMap()));\r\n    }\r\n\r\n    componentDidUpdate(/* prevProps, prevState, snapshot */) {\r\n        if (this.refMap.current &&\r\n            this.refMap.current.clientWidth !== this.state.mapWidth &&\r\n            this.refMap.current.clientHeight !== this.state.mapHeight\r\n        ) {\r\n            if (!this.OSM) {\r\n                this.setState({\r\n                    mapWidth: this.refMap.current.clientWidth,\r\n                    mapHeight: this.refMap.current.clientHeight,\r\n                }, () => setTimeout(() => this.updateMap(), 10));\r\n            } else {\r\n                this.setState({\r\n                    mapWidth: this.refMap.current.clientWidth,\r\n                    mapHeight: this.refMap.current.clientHeight,\r\n                }, () => this.OSM.oMap.updateSize());\r\n            }\r\n        }\r\n    }\r\n\r\n    renderTooltip() {\r\n        if (!this.state.tooltip) {\r\n            return null;\r\n        }\r\n        return <div\r\n            key=\"tooltip\"\r\n            style={{\r\n                position: 'absolute',\r\n                top: this.state.tooltip.top,\r\n                left: this.state.tooltip.left,\r\n                color: '#000',\r\n                padding: '3px 5px',\r\n                backgroundColor: '#fff',\r\n                borderRadius: 5,\r\n            }}\r\n        >\r\n            {this.state.tooltip.text}\r\n        </div>;\r\n    }\r\n\r\n    render() {\r\n        if (JSON.stringify(this.props.things) !== JSON.stringify(this.state.things) && this.OSM) {\r\n            setTimeout(() =>\r\n                this.setState({ things: [...this.props.things] }, () =>\r\n                    this.refMap.current?.clientWidth && this.updateMap()), 100);\r\n        }\r\n\r\n        return [\r\n            <div\r\n                ref={this.refMap}\r\n                key=\"map\"\r\n                id={this.props.id || 'map'}\r\n                style={{\r\n                    height: '100%',\r\n                    width: '100%',\r\n                    overflow: 'hidden',\r\n                }}\r\n            />,\r\n            this.renderTooltip(),\r\n        ];\r\n    }\r\n}\r\n\r\nOlMap.propTypes = {\r\n    id: PropTypes.string,\r\n    socket: PropTypes.object,\r\n    things: PropTypes.array,\r\n    onSelect: PropTypes.func,\r\n    hideHome: PropTypes.bool,\r\n};\r\n\r\nexport default OlMap;\r\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n"],"names":["Generic","window","visRxWidget","VisRxWidget","OpenSmartCityMap","constructor","props","super","onDataUpdated","id","state","values","this","setState","points","buildPoints","things","dataStreams","onPointsChanged","obj","type","_key","hideHome","getWidgetInfo","visSet","visSetLabel","visSetColor","visWidgetLabel","visName","visAttrs","name","fields","label","default","hidden","adapter","min","max","visDefaultStyle","width","height","position","visPrev","Object","keys","map","native","coordinates","length","longitude","latitude","common","context","lang","en","description","desc","filter","dsId","startsWith","concat","split","pop","value","undefined","val","unit","p","propertiesUpdate","subscribed","rxData","instance","socket","unsubscribeObject","unsubscribeStates","getObjectViewSystem","replace","getForeignStates","async","subscribeObject","subscribeState","getI18nPrefix","componentDidMount","componentWillUnmount","unsubscribeState","onRxDataChanged","renderWidgetBody","setTimeout","content","_jsx","Map","noCard","wrapContent","propTypes","PropTypes","themeType","style","data","withStyles","styles","display","withTheme","HomeSVG","encodeURIComponent","TempSVG","OlMap","Component","mapHeight","mapWidth","refMap","createRef","calculateZoomLevel","_this$state$things","center","fromLonLat","parseFloat","extent","pPoint","createOrUpdate","forEach","point","i","extend","getView","fit","getSize","getZoom","calculateCenter","count","longs","lats","displayTooltip","pixel","target","feature","closest","OSM","oMap","forEachFeatureAtPixel","f","hideTimer","clearTimeout","tooltip","left","top","text","get","updateMap","markerSource","VectorSource","pointsSource","markerStyle","Style","image","Icon","anchor","anchorXUnits","anchorYUnits","opacity","src","tempStyle","pointsLayer","LayerVector","source","layers","Tile","push","view","View","zoom","marker","Feature","geometry","Point","I18n","t","addFeature","on","evt","dragging","getEventPixel","originalEvent","event","onSelect","clear","thing","ds","console","log","Math","round","toString","iconTemp","Text","join","scale","fill","Fill","color","setStyle","setGeometry","setView","getSystemConfig","then","_this$refMap$current","current","clientHeight","componentDidUpdate","clientWidth","updateSize","renderTooltip","padding","backgroundColor","borderRadius","children","render","JSON","stringify","_this$refMap$current2","ref","overflow","require","k","Symbol","for","l","m","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","key","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","_owner","exports","Fragment","jsx","jsxs","module"],"sourceRoot":""}